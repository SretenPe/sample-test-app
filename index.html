<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js"> </script>

        <style>
            .button {
              border: none;
              color: white;
              padding: 15px 32px;
              text-align: center;
              text-decoration: none;
              display: inline-block;
              font-size: 16px;
              margin: 4px 2px;
              cursor: pointer;
            }
            
            .button1 {background-color: #4CAF50;} /* Green */
            .button2 {background-color: #008CBA;} /* Blue */
        </style>
    </head>
    <body>
        <label id="outputField">Hello</label>

        <input type='file' onchange="readURL(this);" />
        <img id="blah" src="https://placehold.it/180" alt="your image" />
        <br>
        <button class="button button2" onclick="predict()">Blue</button>
    </body>
    <script>
        

        function readURL(input) 
        {
            if (input.files && input.files[0]) 
            {
                var reader = new FileReader();
                const img = new Image()
                
                reader.onload = function (e) {
                    $('#blah')
                        .attr('src', e.target.result);
                    img.src = e.target.result
                };

                reader.readAsDataURL(input.files[0]);

        }
        }

        async function predict() 
        {
            let model = await tf.loadLayersModel('https://team3pytest.herokuapp.com/model.json');
            model.summary();

            var reader = new FileReader();
            const img = new Image()
            
            reader.onload = function (e) {
                $('#blah')
                    .attr('src', e.target.result);
                img.src = e.target.result
            };

            reader.readAsDataURL(input.files[0]);

            const elem = document.createElement('canvas');
            elem.height = 224
            elem.width = 224
            const ctx = elem.getContext('2d')
            ctx.drawImage(img, 0, 0, width, height)
            const data = ctx.canvas.toDataURL(img, 'image/png' , 1);

            var example = tf.browser.fromPixels(data);
            example = example.expandDims(0);
            const output = await model.predict(example).data();
            console.log(output);
        }

		//document.getElementById('outputField').innerText = model.predict(tf.tensor2d([20],[1,1]));
    </script>
	
</html>